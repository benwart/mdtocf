on: 
  push:
    tags:
      - '[0-9]+.[0-9]+.[0-9]+'

steps:
  - name: Checkout Code
    uses: actions/checkout@v2
  
  - name: Build and Push Docker Image
    uses: docker/build-push-action@v1
    with:
      username: ${{ secrets.DOCKER_USERNAME }}
      password: ${{ secrets.DOCKER_PASSWORD }}
      repository: benwart/mdtocf
      tag_with_ref: true
      tag_with_sha: true
      push: ${{ startsWith(github.ref, 'refs/tags/') }}